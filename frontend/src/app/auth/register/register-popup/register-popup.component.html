@if (isOpen) {
    <div class="popup-overlay" (click)="closePopup()">
      <div class="popup-content" (click)="$event.stopPropagation()">
        <button class="close-btn" (click)="closePopup()">×</button>
        
        <h2>Inscription rapide</h2>
        <p class="intro">Inscrivez-vous pour demander une visite de cette boutique</p>
  
        @if (error) {
          <p class="error-message">{{ error }}</p>
        }
  
        <form (ngSubmit)="onSubmit()" #form="ngForm">
          <div class="form-group">
            <label for="name">Nom</label>
            <input id="name" name="name" [(ngModel)]="user.name" required minlength="2" />
          </div>
  
          <div class="form-group">
            <label for="firstname">Prénom</label>
            <input id="firstname" name="firstname" [(ngModel)]="user.firstname" required minlength="2" />
          </div>
  
          <div class="form-group">
            <label for="email">Email</label>
            <input id="email" name="email" type="email" [(ngModel)]="user.email" required email />
          </div>
  
          <div class="form-group">
            <label for="password">Mot de passe</label>
            <input id="password" name="password" type="password" [(ngModel)]="user.password" required minlength="6" />
          </div>
  
          <button type="submit" [disabled]="form.invalid || isLoading">
            {{ isLoading ? 'Inscription en cours...' : 'S\'inscrire et demander la visite' }}
          </button>
        </form>
  
        <p class="login-link">
          Déjà un compte ? <a (click)="closePopup()">Se connecter</a>
        </p>
      </div>
    </div>
  }