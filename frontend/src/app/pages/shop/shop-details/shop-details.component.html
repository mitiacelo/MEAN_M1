<div class="shop-details-container">
  @if (loading) {
    <p class="loading">Chargement de la boutique...</p>
  } @else if (error) {
    <p class="error">{{ error }}</p>
  } @else if (shop) {
    <!-- En-tête boutique -->
    <header class="shop-header">
      <h1>{{ shop.name }}</h1>
      <p class="superficie">{{ shop.superficie }} m²</p>
      <p class="description">{{ shop.description || 'Aucune description disponible' }}</p>
      <p class="status">
        Statut : 
        <span [ngClass]="{
          'status-active': shop.status === 'actif',
          'status-inactive': shop.status === 'inactif',
          'status-pending': shop.status === 'en attente'
        }">
          {{ shop.status | titlecase }}
        </span>
      </p>
    </header>

    <!-- ... header boutique inchangé ... -->

      <!-- Contenu selon statut -->
      @if (shop.status === 'actif') {
        <!-- produits comme avant -->
      } @else if (shop.status === 'inactif') {
        <section class="visit-request-section">
          <h2>Cette boutique est disponible</h2>
          <p class="visit-text">
            Vous souhaitez visiter cet espace et en discuter avec le propriétaire ?
          </p>

          @if (requestSent) {
            <div class="confirmation-box">
              <h3>Votre demande a été envoyée !</h3>
              <p>Le propriétaire a été informé. Vous recevrez une réponse rapidement.</p>
            </div>
          } @else {
            <button class="request-visit-btn" (click)="openRegisterPopup()">
              Demander un rendez-vous pour visiter
            </button>
          }
        </section>
      } @else if (shop.status === 'en attente') {
        <!-- message en attente comme avant -->
      }

      <!-- Popup d'inscription -->
      <app-register-popup 
        [isOpen]="showRegisterPopup"
        (close)="closePopup()"
        (success)="onRegisterSuccess($event)">
      </app-register-popup>

      <button class="back-btn" routerLink="/landing">Retour à l'accueil</button>
  }
</div>